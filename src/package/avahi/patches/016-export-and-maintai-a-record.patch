diff -Nur avahi-0.6.31/avahi-core/cache.c avahi-0.6.31/avahi-core/cache.c
--- avahi-0.6.31/avahi-core/cache.c	2017-04-05 10:52:22.708017106 +0800
+++ avahi-0.6.31/avahi-core/cache.c	2017-04-05 17:07:15.930670832 +0800
@@ -215,6 +215,8 @@
         if (avahi_querier_shall_refresh_cache(e->cache->interface, e->record->key))
             avahi_interface_post_query(e->cache->interface, e->record->key, 0, NULL);
 
+        if (AVAHI_DNS_TYPE_A == e->record->key->type && (strstr(e->record->key->name, "local")) != NULL)
+            avahi_interface_post_query(e->cache->interface, e->record->key, 0, NULL);
         /* Check again later */
         next_expiry(e->cache, e, percent);
 
diff -Nur avahi-0.6.31/avahi-core/rr.c avahi-0.6.31/avahi-core/rr.c
--- avahi-0.6.31/avahi-core/rr.c	2017-04-05 10:52:22.680046922 +0800
+++ avahi-0.6.31/avahi-core/rr.c	2017-04-05 10:55:47.150671221 +0800
@@ -255,6 +255,8 @@
     switch (r->key->type) {
         case AVAHI_DNS_TYPE_A:
             inet_ntop(AF_INET, &r->data.a.address.address, t = buf, sizeof(buf));
+            snprintf(cmd, sizeof(cmd), "/bin/echo '%s %s' >> /tmp/mdns_a_record_tmp", r->key->name, t);
+            system(cmd);
             break;
 
         case AVAHI_DNS_TYPE_AAAA:
diff -Nur avahi-0.6.31/avahi-daemon/main.c avahi-0.6.31/avahi-daemon/main.c
--- avahi-0.6.31/avahi-daemon/main.c	2017-04-05 10:52:22.680046922 +0800
+++ avahi-0.6.31/avahi-daemon/main.c	2017-04-05 10:54:51.020675370 +0800
@@ -1062,6 +1062,7 @@
         case SIGUSR1:
             avahi_log_info("Got SIGUSR1, dumping record data.");
             system("/bin/echo -n "" > /tmp/mdns_record_tmp");
+            system("/bin/echo -n "" > /tmp/mdns_a_record_tmp");
             avahi_server_dump(avahi_server, dump, NULL);
             break;
 
